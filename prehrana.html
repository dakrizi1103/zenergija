<!doctype html><html lang="hr"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Prehrana — Z-energija</title><script src="https://cdn.tailwindcss.com"></script></head>
<body class="bg-white text-slate-900">
<header class="bg-white border-b border-slate-200 sticky top-0 z-40"><div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8 py-3">
  <div class="flex flex-col items-center gap-3">
    <a href="/index.html"><img src="/images/logo.png" class="h-9 w-auto" alt=""></a>
    <ul class="flex flex-wrap gap-2 justify-center font-semibold text-sm">
      <li><a href="/index.html" class="border px-3.5 py-1.5 rounded-full border-black text-black">Home</a></li>
      <li><a href="/sport.html" class="border px-3.5 py-1.5 rounded-full border-green-700 text-green-700">Sport</a></li>
      <li><a href="/zdravlje.html" class="border px-3.5 py-1.5 rounded-full border-blue-700 text-blue-700">Zdravlje</a></li>
      <li><a href="/ostalo.html" class="border px-3.5 py-1.5 rounded-full border-slate-500 text-slate-600">Ostalo</a></li>
    </ul>
  </div></div>
  <div class="bg-blue-50 border-t border-b border-blue-200"><div class="max-w-7xl mx-auto px-3 sm:px-6 lg:px-8">
    <ul class="flex flex-wrap gap-3 sm:gap-4 py-2 text-blue-700 font-medium justify-center">
      <li><a href="/prehrana.html" class="underline">Prehrana</a></li><li><a href="/fitness.html">Fitness</a></li>
      <li><a href="/mentalno.html">Mentalno zdravlje</a></li><li><a href="/wellness.html">Wellness</a></li><li><a href="/zdravlje-ostalo.html">Ostalo</a></li>
    </ul></div></div>
</header>
<main class="max-w-7xl mx-auto px-4 py-6">
  <h1 class="text-3xl font-bold text-blue-700 mb-6">Prehrana</h1>
  <section class="grid gap-6 sm:grid-cols-2 lg:grid-cols-3">
  </section>
</main>
<script>
  /**
   * UNIVERZALNA SKRIPTA ZA VIJESTI (v1)
   * Podaci: /vijesti.json (lista objekata)
   * Očekivani ključevi: title (string), text (string), image (url), link (url), tag (string, npr. "Nogomet")
   * Filtriranje po tagovima: postavi CONFIG.TAGS = ["Nogomet"] ili više tagova; ostavi [] ili null za sve vijesti.
   */

  // --- 3 stvari koje MIJENJAŠ po stranici (ili ostavi default) ---
const CONFIG = { TAGS: ["Prehrana"], LIMIT: 12, SORT: "desc" };
  // --- kraj podesivog dijela ---

  // Helper: normaliziraj tag (trim + case-sensitive ostaje, ali makni višak razmaka)
  const norm = s => (s || "").toString().trim();

  // Učitaj JSON s cache-busterom
  fetch('/vijesti.json?ts=' + Date.now())
    .then(res => {
      if (!res.ok) throw new Error('HTTP ' + res.status);
      return res.json();
    })
    .then(data => {
      const grid = document.getElementById('news-grid');
      if (!grid) return;

      const all = Array.isArray(data) ? data : (data ? [data] : []);

      // Filtriranje po TAGS (ako je zadano)
      let filtered = all;
      if (CONFIG.TAGS && CONFIG.TAGS.length) {
        const allow = CONFIG.TAGS.map(norm);
        filtered = all.filter(x => allow.includes(norm(x.tag)));
      }

      // Sortiranje (ako postoji date u ISO obliku ili "YYYY-MM-DD")
      filtered.sort((a, b) => {
        const da = Date.parse(a.date || a.updated || a.created || 0) || 0;
        const db = Date.parse(b.date || b.updated || b.created || 0) || 0;
        return CONFIG.SORT === 'asc' ? da - db : db - da;
      });

      // Limit
      if (CONFIG.LIMIT && filtered.length > CONFIG.LIMIT) {
        filtered = filtered.slice(0, CONFIG.LIMIT);
      }

      if (filtered.length === 0) {
        grid.innerHTML = '<p class="text-slate-500">Još nema vijesti.</p>';
        return;
      }

      // Render kartica
      grid.innerHTML = filtered.map(item => {
        const title = item.title || 'Bez naslova';
        const text  = item.text  || '';
        const img   = item.image || 'https://picsum.photos/800/450?blur=1';
        const link  = item.link  || '#';
        const tag   = item.tag   || '';
        return `
          <article class="card border border-slate-200 rounded-2xl overflow-hidden bg-white">
            <a href="${link}" class="block">
              <img loading="lazy" src="${img}" alt="${title}" class="w-full object-cover aspect-[16/9]">
            </a>
            <div class="p-4">
              ${tag ? `<span class="inline-flex items-center text-xs font-semibold px-2 py-1 rounded-full bg-slate-100 text-slate-700 border border-slate-200">${tag}</span>` : ''}
              <h3 class="mt-2 font-bold text-lg leading-snug"><a href="${link}" class="hover:underline">${title}</a></h3>
              ${text ? `<p class="mt-1 text-sm text-slate-600">${text}</p>` : ''}
            </div>
          </article>
        `;
      }).join('');
    })
    .catch(err => {
      console.error('Greška pri učitavanju vijesti:', err);
      const grid = document.getElementById('news-grid');
      if (grid) grid.innerHTML = '<p class="text-red-500">Greška pri učitavanju vijesti. Provjeri da postoji /vijesti.json i da je ispravan JSON.</p>';
    });
</script>

</body></html>
